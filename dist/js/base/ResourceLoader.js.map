{"version":3,"sources":["../../../js/base/ResourceLoader.js"],"names":["ResourceLoader","map","Map","Resources","key","value","image","Image","src","set","callback","loadCount","values","onload","size"],"mappings":";;;;;;;;;qjBAAA;;;AACA;;;;IAEaA,c,WAAAA,c;AACT,8BAAa;AAAA;;AACT,aAAKC,GAAL,GAAW,IAAIC,GAAJ,CAAQC,oBAAR,CAAX;AADS;AAAA;AAAA;;AAAA;AAET,iCAAsB,KAAKF,GAA3B,8HAA+B;AAAA;;AAAA;;AAAA,oBAAvBG,GAAuB;AAAA,oBAAlBC,KAAkB;;AAC3B,oBAAMC,QAAQ,IAAIC,KAAJ,EAAd;AACAD,sBAAME,GAAN,GAAYH,KAAZ;AACA,qBAAKJ,GAAL,CAASQ,GAAT,CAAaL,GAAb,EAAiBE,KAAjB;AACH;AANQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOZ;;;;iCACQI,Q,EAAU;AAAA;;AACf,gBAAIC,YAAY,CAAhB;AADe;AAAA;AAAA;;AAAA;AAEf,sCAAkB,KAAKV,GAAL,CAASW,MAAT,EAAlB,mIAAqC;AAAA,wBAA5BP,KAA4B;;AACjCA,0BAAMQ,MAAN,GAAe,YAAM;AACjBF;AACA,4BAAIA,aAAa,MAAKV,GAAL,CAASa,IAA1B,EAAgC;AAC5BJ,qCAAS,MAAKT,GAAd;AACH;AACJ,qBALD;AAMH;AATc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUlB;;;iCACe;AACZ,mBAAO,IAAID,cAAJ,EAAP;AACH","file":"ResourceLoader.js","sourcesContent":["//资源文件加载器，确保canvas在图片资源加载完成后才进行渲染\r\nimport {Resources} from \"./Resources.js\";\r\n\r\nexport class ResourceLoader {\r\n    constructor(){\r\n        this.map = new Map(Resources);\r\n        for(let[key, value]of this.map){\r\n            const image = new Image();\r\n            image.src = value;\r\n            this.map.set(key,image);\r\n        }\r\n    }\r\n    onLoaded(callback) {\r\n        let loadCount = 0;\r\n        for (let value of this.map.values()) {\r\n            value.onload = () => {\r\n                loadCount++;\r\n                if (loadCount >= this.map.size) {\r\n                    callback(this.map);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    static  create(){\r\n        return new ResourceLoader();\r\n    }\r\n}"]}